webpackJsonp([31],{nUeh:function(e,t){},yN9r:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("JBQq"),a=s("3/Gx"),n=s("0azi"),o={data:function(){return{userInfo:{},maskShow:!1,tip:"",safePwd:""}},components:{HeadMenu:a.a,Prompt:n.a},mounted:function(){this.getUserInfo()},methods:{getUserInfo:function(){var e=this;Object(i.c)().then(function(t){0===t.data.code&&(e.userInfo=t.data.result)})},changeUserInfo:function(){var e=this;if(!this.safePwd)return this.tip="安全码不能为空",void this.$refs.promptRef.show();if(!/^[a-zA-Z0-9]{8,16}$/.test(this.safePwd))return this.tip="安全码格式不正确",void this.$refs.promptRef.show();var t=this.$refs.nickName.value,s=this.$refs.email.value,a=this.$refs.confirmPwd.value,n=new URLSearchParams,o=new URLSearchParams,r=new URLSearchParams,c="";n.append("safe_pwd",a),Object(i.n)(n).then(function(a){if(40011===a.data.code)return e.tip="会员安全码错误",void e.$refs.promptRef.show();c=a.data.result.safePwdToken,o.append("safe_pwd_token",c),o.append("nickname",t),r.append("safe_pwd_token",c),r.append("email",s),Object(i.j)(o).then(function(t){e.$refs.confirmPwd.value="",0===t.data.code&&(e.tip=t.data.msg,e.$refs.promptRef.show()),e.maskShow=!1}),Object(i.i)(r).then(function(t){e.$refs.confirmPwd.value="",0===t.data.code&&(e.tip=t.data.msg,e.$refs.promptRef.show()),e.maskShow=!1})})},cancel:function(){this.maskShow=!1,this.$refs.confirmPwd.value=""},getVerifySafePwd:function(){return this.userInfo.nickname?/^[a-zA-Z\u4e00-\u9fa5]+$/.test(this.userInfo.nickname)?this.userInfo.nickname.length<4||this.userInfo.nickname.length>16?(this.tip="字符长度需要在4-16之间",void this.$refs.promptRef.show()):this.userInfo.email?/^[A-Za-z0-9]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(this.userInfo.email)?void(this.maskShow=!0):(this.tip="邮箱格式不正确",void this.$refs.promptRef.show()):(this.tip="邮箱不能为空",void this.$refs.promptRef.show()):(this.tip="会员姓名只能输入汉字或字母",void this.$refs.promptRef.show()):(this.tip="会员姓名不能为空",void this.$refs.promptRef.show())},checkNickname:function(e){e?/^[a-zA-Z\u4e00-\u9fa5]+$/.test(e)?(e.length<4||e.length>16)&&(this.tip="字符长度需要在4-16之间",this.$refs.promptRef.show()):(this.tip="会员姓名只能输入汉字或字母",this.$refs.promptRef.show()):(this.tip="会员姓名不能为空",this.$refs.promptRef.show())},checkEmail:function(e){e?/^[A-Za-z0-9]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(e)||(this.tip="邮箱格式不正确",this.$refs.promptRef.show()):(this.tip="邮箱不能为空",this.$refs.promptRef.show())},checkSafePwd:function(e){e?/^[a-zA-Z0-9]{8,16}$/.test(e)||(this.tip="安全码格式不正确",this.$refs.promptRef.show()):(this.tip="安全码不能为空",this.$refs.promptRef.show())}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"person"},[s("HeadMenu"),e._v(" "),s("form",{attrs:{action:""},on:{submit:function(t){t.preventDefault(),e.getVerifySafePwd(t)}}},[s("div",{staticClass:"form-content"},[s("div",{staticClass:"m-input"},[s("div",{staticClass:"title"},[e._v("会员账号:")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.account,expression:"userInfo.account"}],attrs:{type:"text",name:"account",disabled:""},domProps:{value:e.userInfo.account},on:{input:function(t){t.target.composing||e.$set(e.userInfo,"account",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"m-input"},[s("div",{staticClass:"title"},[e._v("会员名称:")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.nickname,expression:"userInfo.nickname"}],ref:"nickName",attrs:{type:"text"},domProps:{value:e.userInfo.nickname},on:{blur:function(t){e.checkNickname(e.userInfo.nickname)},input:function(t){t.target.composing||e.$set(e.userInfo,"nickname",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"m-input"},[s("div",{staticClass:"title"},[e._v("当前级别:")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.level,expression:"userInfo.level"}],attrs:{type:"text",disabled:""},domProps:{value:e.userInfo.level},on:{input:function(t){t.target.composing||e.$set(e.userInfo,"level",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"m-input"},[e._m(0),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.email,expression:"userInfo.email"}],ref:"email",attrs:{type:"text",name:"mail",placeholder:"输入您的邮箱地址"},domProps:{value:e.userInfo.email},on:{blur:function(t){e.checkEmail(e.userInfo.email)},input:function(t){t.target.composing||e.$set(e.userInfo,"email",t.target.value)}}})])]),e._v(" "),e._m(1)]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.maskShow,expression:"maskShow"}],staticClass:"mask"},[s("div",{staticClass:"alert-content"},[s("div",{staticClass:"title"},[e._v("输入当前安全码")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.safePwd,expression:"safePwd"}],ref:"confirmPwd",staticClass:"confirmpwd",attrs:{type:"password",placeholder:"输入您的当前安全码"},domProps:{value:e.safePwd},on:{blur:function(t){e.checkSafePwd(e.safePwd)},input:function(t){t.target.composing||(e.safePwd=t.target.value)}}}),e._v(" "),s("div",{staticClass:"decision"},[s("div",{staticClass:"cancel",on:{click:e.cancel}},[e._v("取消")]),e._v(" "),s("div",{staticClass:"decide",on:{click:e.changeUserInfo}},[e._v("确定")])])])]),e._v(" "),s("prompt",{ref:"promptRef",attrs:{tip:e.tip}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[this._v("邮箱: "),t("span",[this._v("*邮箱可用来找回密码，请谨慎输入！")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"submit"},[t("input",{attrs:{type:"submit",value:"确定"}})])}]};var c=s("Z0/y")(o,r,!1,function(e){s("nUeh")},"data-v-09f0c567",null);t.default=c.exports}});
//# sourceMappingURL=31.f3f2d17d5bd6b00ab2f3.js.map